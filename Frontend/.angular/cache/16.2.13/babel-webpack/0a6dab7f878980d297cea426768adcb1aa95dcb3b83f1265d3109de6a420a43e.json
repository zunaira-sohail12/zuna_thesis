{"ast":null,"code":"import { HttpHeaders } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class PythonApisService {\n  constructor(http) {\n    this.http = http;\n  }\n  sourceSave(sourceId) {\n    sessionStorage.setItem('sourceId', sourceId);\n  }\n  getSource() {\n    return sessionStorage.getItem('sourceId');\n  }\n  callTestService() {\n    //  let body = new URLSearchParams();\n    //  body.set('questions',questions);\n    let url = \"http://localhost:5000/test\";\n    return this.http.get(url);\n  }\n  callPythonService(questions) {\n    //  let body = new URLSearchParams();\n    //  body.set('questions',questions);\n    const body = {\n      'questions': questions\n    };\n    let url = \"http://localhost:5000/chat\";\n    return this.http.post(url, body);\n  }\n  uploads(event) {\n    const formData = new FormData();\n    const httpHeaders = new HttpHeaders({\n      'x-api-key': 'sec_aqyqlWcZ4GoYjGY7l1ZZLb3AYcDkHo5n',\n      'Access-Control-Allow-Origin': '*'\n    });\n    formData.append(\"file\", event.target.files[0]);\n    this.http.post('https://api.chatpdf.com/v1/sources/add-file', formData, {\n      headers: httpHeaders\n    }).subscribe(data => {\n      console.log(data);\n      this.sourceSave(JSON.parse(JSON.stringify(data)).sourceId);\n    }, err => {\n      // ret_result=err.toString; \n      console.log(err);\n    });\n  }\n  getMsg(question) {\n    const body = {\n      \"sourceId\": \"src_8iY3bCuTJ2ddv235Wc8Lf\",\n      \"question\": question\n    };\n    let url = \"http://localhost:5000/msg\";\n    return this.http.post(url, body);\n  }\n  callCreateAccountService(username, email, userid) {\n    const body = {\n      \"user_id\": userid,\n      \"username\": username,\n      \"user_email\": email\n    };\n    let url = \"http://localhost:5000/insert\";\n    return this.http.post(url, body);\n  }\n  callUploadImageService(events, userid) {\n    const formData = new FormData();\n    let url = \"http://localhost:5000/upload_image/\" + userid;\n    console.log(\"UserId::\" + userid);\n    console.log(events);\n    formData.append(\"files\", events);\n    this.http.post(url, formData).subscribe(data => {\n      console.log(data);\n      this.sourceSave(JSON.parse(JSON.stringify(data)).sourceId);\n    }, err => {\n      // ret_result=err.toString; \n      console.log(err);\n    });\n  }\n  callFileTrain(event) {\n    //  let body = new URLSearchParams();\n    //  body.set('questions',questions);\n    const formData = new FormData();\n    let url = \"http://localhost:5000/uploading\";\n    formData.append(\"files\", event.target.files[0]);\n    return this.http.post(url, formData);\n    /*  .subscribe(data => {\n        console.log(data);\n        this.sourceSave(JSON.parse(JSON.stringify(data)).sourceId);\n      },err=>{\n        // ret_result=err.toString;\n        console.log(err);\n        }); */\n  }\n\n  callURLTrain(url) {\n    //  let body = new URLSearchParams();\n    //  body.set('questions',questions);\n    const body = {\n      \"url\": url\n    };\n    let urls = \"http://localhost:5000/scrap\";\n    return this.http.post(urls, body);\n  }\n  /// call send mail API\n  sendMail(sender, subject, bodys) {\n    const body = {\n      \"sender\": sender,\n      \"subject\": subject,\n      \"body\": bodys\n    };\n    let urls = \"http://localhost:5000/send_email\";\n    return this.http.post(urls, body);\n  }\n  /// call save user API\n  saveUser(email, username, password, cpassword) {\n    const body = {\n      \"user\": {\n        \"email\": email,\n        \"username\": username,\n        \"password\": password,\n        \"cpassword\": cpassword\n      }\n    };\n    let urls = \"http://localhost:5000/insert_user\";\n    return this.http.post(urls, body);\n  }\n  /// call user login API\n  userLogin(username, password) {\n    const body = {\n      \"user\": {\n        \"username\": username,\n        \"password\": password\n      }\n    };\n    let urls = \"http://localhost:5000/login_user\";\n    return this.http.post(urls, body);\n  }\n  static #_ = this.ɵfac = function PythonApisService_Factory(t) {\n    return new (t || PythonApisService)(i0.ɵɵinject(i1.HttpClient));\n  };\n  static #_2 = this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: PythonApisService,\n    factory: PythonApisService.ɵfac,\n    providedIn: 'root'\n  });\n}","map":{"version":3,"names":["HttpHeaders","PythonApisService","constructor","http","sourceSave","sourceId","sessionStorage","setItem","getSource","getItem","callTestService","url","get","callPythonService","questions","body","post","uploads","event","formData","FormData","httpHeaders","append","target","files","headers","subscribe","data","console","log","JSON","parse","stringify","err","getMsg","question","callCreateAccountService","username","email","userid","callUploadImageService","events","callFileTrain","callURLTrain","urls","sendMail","sender","subject","bodys","saveUser","password","cpassword","userLogin","_","i0","ɵɵinject","i1","HttpClient","_2","factory","ɵfac","providedIn"],"sources":["/Users/zunaira/Documents/livecode_thesis/Frontend/src/app/python-apis.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpErrorResponse, HttpHeaders } from '@angular/common/http'\r\nimport { Observable } from 'rxjs/internal/Observable';\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class PythonApisService {\r\n\r\n  constructor(private http: HttpClient) { }\r\n\r\n\r\nsourceSave(sourceId:any){\r\n  sessionStorage.setItem('sourceId', sourceId);\r\n}\r\ngetSource(){\r\n  return sessionStorage.getItem('sourceId');\r\n}\r\n\r\ncallTestService()\r\n{\r\n  //  let body = new URLSearchParams();\r\n  //  body.set('questions',questions);\r\n\r\n  let url=\"http://localhost:5000/test\"; \r\n  return this.http.get(url);\r\n}\r\n\r\n\r\n  callPythonService(questions:any)\r\n  {\r\n  //  let body = new URLSearchParams();\r\n  //  body.set('questions',questions);\r\n    const body = {'questions':questions};\r\n    let url=\"http://localhost:5000/chat\"; \r\n    return this.http.post(url,body);\r\n  }\r\n\r\n\r\n\r\n\r\n  uploads(event:any) {\r\n    const formData: FormData = new FormData();\r\n    const httpHeaders: HttpHeaders = new HttpHeaders({\r\n      'x-api-key':'sec_aqyqlWcZ4GoYjGY7l1ZZLb3AYcDkHo5n',\r\n      'Access-Control-Allow-Origin':'*'\r\n  });\r\n    \r\n      formData.append(\"file\",event.target.files[0]);\r\n    this.http.post('https://api.chatpdf.com/v1/sources/add-file', formData,{ headers: httpHeaders })\r\n    .subscribe(data => {\r\n      console.log(data);\r\n      this.sourceSave(JSON.parse(JSON.stringify(data)).sourceId);\r\n    },err=>{\r\n      // ret_result=err.toString; \r\n      console.log(err);\r\n      });  \r\n    \r\n  }\r\n\r\n\r\n  getMsg(question:any) {\r\n      const body = {\r\n        \"sourceId\":\"src_8iY3bCuTJ2ddv235Wc8Lf\",\r\n        \"question\":question\r\n        }\r\n      let url=\"http://localhost:5000/msg\"; \r\n      return this.http.post(url,body);\r\n  }\r\n\r\n\r\n  callCreateAccountService(username:any,email:any,userid:any)\r\n  {\r\n    const body = {\r\n      \"user_id\":userid,\r\n      \"username\":username,\r\n      \"user_email\":email\r\n  }\r\n    let url=\"http://localhost:5000/insert\"; \r\n    return this.http.post(url,body);\r\n  }\r\n\r\n  callUploadImageService(events:any,userid:any)\r\n  {\r\n  const formData: FormData = new FormData();\r\n\r\n    let url=\"http://localhost:5000/upload_image/\"+userid; \r\n    console.log(\"UserId::\"+userid);\r\n    console.log(events);\r\n    formData.append(\"files\",events);\r\n    this.http.post(url, formData)\r\n    .subscribe(data => {\r\n      console.log(data);\r\n      this.sourceSave(JSON.parse(JSON.stringify(data)).sourceId);\r\n    },err=>{\r\n      // ret_result=err.toString; \r\n      console.log(err);\r\n      });  \r\n   \r\n  }\r\n\r\n\r\n  callFileTrain(event:any)\r\n  {\r\n    \r\n  //  let body = new URLSearchParams();\r\n  //  body.set('questions',questions);\r\n  const formData: FormData = new FormData();\r\n\r\n    let url=\"http://localhost:5000/uploading\"; \r\n    formData.append(\"files\",event.target.files[0]);\r\n    return this.http.post(url, formData)\r\n  /*  .subscribe(data => {\r\n      console.log(data);\r\n      this.sourceSave(JSON.parse(JSON.stringify(data)).sourceId);\r\n    },err=>{\r\n      // ret_result=err.toString; \r\n      console.log(err);\r\n      }); */\r\n  }\r\n\r\n\r\n  callURLTrain(url:any)\r\n  {\r\n  //  let body = new URLSearchParams();\r\n  //  body.set('questions',questions);\r\n    const body = {\r\n      \"url\":url\r\n  }\r\n    let urls=\"http://localhost:5000/scrap\"; \r\n    return this.http.post(urls,body);\r\n  }\r\n\r\n\r\n/// call send mail API\r\n  sendMail(sender:any,subject:any,bodys:any)\r\n  {\r\nconst body={\r\n    \"sender\":sender,\r\n    \"subject\":subject,\r\n    \"body\":bodys\r\n}\r\n    let urls=\"http://localhost:5000/send_email\"; \r\n    return this.http.post(urls,body);\r\n  }\r\n\r\n  /// call save user API\r\n  saveUser(email:any,username:any,password:any,cpassword:any)\r\n  {\r\nconst body={\r\n  \"user\":\r\n  {\r\n      \"email\":email,\r\n      \"username\":username,\r\n      \"password\":password,\r\n      \"cpassword\":cpassword\r\n  }\r\n}\r\n    let urls=\"http://localhost:5000/insert_user\"; \r\n    return this.http.post(urls,body);\r\n  }\r\n\r\n  /// call user login API\r\n  userLogin(username:any,password:any)\r\n  {\r\n  const body={\r\n    \"user\":\r\n    {\r\n        \"username\":username,\r\n        \"password\":password\r\n    }\r\n}\r\n    let urls=\"http://localhost:5000/login_user\"; \r\n    return this.http.post(urls,body);\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}